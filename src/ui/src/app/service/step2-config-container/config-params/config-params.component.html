<clr-modal [(clrModalOpen)]="modalOpened" [clrModalSize]="'md'" [clrModalClosable]="false"
           [clrModalPreventClose]="true">
  <h3 class="modal-title">{{ 'SERVICE.VOLUME_CONFIG' | translate }}</h3>
  <div class="modal-body">
    <lib-input-ex [inputLabel]="'SERVICE.STEP_2_CONTAINER_NAME' | translate"
                  [inputIsRequired]="true"
                  [inputPattern]="patternContainerName"
                  [inputDefaultValue]="container.name"
                  [validatorMessage]="[{key:'pattern',message:'SERVICE.STEP_2_CONTAINER_NAME_PATTERN_NSG' | translate}]"
                  (commitEvent)="container.name = $event">
    </lib-input-ex>
    <lib-input-ex [inputLabel]="'SERVICE.STEP_2_WORKING_DIR' | translate"
                  [inputPattern]="patternWorkDir"
                  [inputDefaultValue]="container.working_dir"
                  [inputPlaceholder]="'SERVICE.STEP_2_WORK_DIRECTOR'| translate"
                  (commitEvent)="container.working_dir = $event">
    </lib-input-ex>
    <lib-input-ex [inputType]="2"
                  [inputLabel]="'SERVICE.STEP_2_VOLUME_MOUNTS' | translate"
                  [inputDefaultValue]="getVolumesDescription(0, container)"
                  [inputPlaceholder]="'SERVICE.STEP_2_STORAGE_VOLUME'| translate"
                  (editEvent)="editVolumeMount()">
    </lib-input-ex>
    <div *ngIf="container.volume_mounts.length > 1" class="volume-info-container">
        <span *ngFor="let _ of container.volume_mounts; let i = index">
          <span *ngIf="i > 0">{{getVolumesDescription(i, container)}}</span>
        </span>
    </div>
    <lib-input-ex [inputType]="2"
                  [inputLabel]="'SERVICE.STEP_2_Env' | translate"
                  [inputDefaultValue]="getEnvsDescription()"
                  [inputPlaceholder]="'SERVICE.STEP_2_ENVIRONMENT_VARIABLES'| translate"
                  (editEvent)="editEnvironment()">
    </lib-input-ex>
    <lib-input-array-ex [inputCategory]="'number'"
                        [inputArrayFixed]="fixedContainerPort.get(container)"
                        [inputMin]="1"
                        [inputArrayDefault]="container.container_port"
                        [inputMax]="65535"
                        [inputPlaceholder]="'[1..65535]'"
                        [inputLabel]="'SERVICE.STEP_2_CONTAINER_PORT' | translate"
                        (commitEvent)="setContainerPorts($event)">
    </lib-input-array-ex>
    <lib-input-ex [inputLabel]="'SERVICE.STEP_2_COMMAND' | translate"
                  [inputDefaultValue]="container.command"
                  [inputPlaceholder]="'SERVICE.STEP_2_COMMAND'| translate"
                  (commitEvent)="container.command = $event">
    </lib-input-ex>
    <lib-input-ex *ngIf="curContainerType === 0"
                  [inputLabel]="'SERVICE.STEP_2_CPU_REQUEST' | translate"
                  [inputPattern]="patternCpuRequest"
                  [inputDefaultValue]="container.cpu_request"
                  [inputPlaceholder]="'eg. 100m'"
                  [validatorAsyncFn]="checkSetCpuRequestFun"
                  [validatorMessage]="[{key:'beyondMaxLimit',message: 'SERVICE.STEP_2_BEYOND_MAX_VALUE' | translate}]"
                  (commitEvent)="container.cpu_request = $event">
    </lib-input-ex>
<!--    <lib-input-ex *ngIf="curContainerType === 0"-->
<!--                  [inputLabel]="'SERVICE.STEP_2_MEMORY_REQUEST' | translate"-->
<!--                  [inputPattern]="patternMemRequest"-->
<!--                  [validatorAsyncFn]="checkSetMemRequestFun"-->
<!--                  [inputDefaultValue]="container.mem_request"-->
<!--                  [inputPlaceholder]="'eg. 100Mi'"-->
<!--                  [validatorMessage]="[{key:'beyondMaxLimit',message: 'SERVICE.STEP_2_BEYOND_MAX_VALUE' | translate}]"-->
<!--                  (commitEvent)="container.mem_request = $event"></lib-input-ex>-->
<!--    <lib-input-ex *ngIf="curContainerType === 0"-->
<!--                  [inputLabel]="'SERVICE.STEP_2_CPU_LIMIT' | translate"-->
<!--                  [inputDefaultValue]="container.cpu_limit"-->
<!--                  [inputPlaceholder]="'eg. 1024m'"-->
<!--                  [inputPattern]="patternCpuLimit"-->
<!--                  (commitEvent)="container.cpu_limit = $event"></lib-input-ex>-->
<!--    <lib-input-ex *ngIf="curContainerType === 0"-->
<!--                  [inputLabel]="'SERVICE.STEP_2_MEMORY_LIMIT' | translate"-->
<!--                  [inputDefaultValue]="container.mem_limit"-->
<!--                  [inputPattern]="patternMemLimit"-->
<!--                  [inputPlaceholder]="'eg. 1024Mi'"-->
<!--                  (commitEvent)="container.mem_limit = $event"></lib-input-ex>-->

  </div>
  <div class="modal-footer">
    <button class="btn btn-default" (click)="modalOpened = false">{{"BUTTON.CANCEL" | translate}}</button>
    <button class="btn btn-primary">{{"BUTTON.CONFIRM" | translate}}</button>
  </div>
</clr-modal>

<environment-value *ngIf="showEnvironmentValue"
                   [isProvideBindConfigMap]="true"
                   [projectName]="projectName"
                   [inputEnvsData]="getDefaultEnvsData()"
                   [inputFixedKeyList]="getDefaultEnvsFixedData()"
                   (closeNotification)="showEnvironmentValue = false"
                   (onConfirm)="setEnvironment($event)">
</environment-value>






